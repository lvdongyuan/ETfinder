/* --- Design tokens --- */
:root{
  /* colors */
  --bg:#ffffff; --text:#0f172a; --muted:#6b7280;
  --card:#ffffff; --border:#e5e7eb; --divider:#eaecef;
  --primary:#111827; --primary-fg:#ffffff; /* 深色墨黑 */
  --accent:#3b82f6; /* 系统蓝，用得很克制 */
  --ring:#94a3b8; /* focus ring */
  --chip:#f3f4f6; --chip-fg:#111827;

  /* metrics */
  --radius:12px; --radius-lg:14px;
  --shadow:0 1px 2px rgba(16,24,40,.06), 0 8px 24px rgba(16,24,40,.04);
  --space:12px;

  /* fonts */
  --sans: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
          "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
  --mono: ui-monospace, Menlo, SFMono-Regular, Consolas, monospace;
}

@media (prefers-color-scheme: dark){
  :root{
    --bg:#0b0e14; --text:#e6e8ec; --muted:#9aa4b2;
    --card:#0f131a; --border:#1f2937; --divider:#202634;
    --primary:#e6e8ec; --primary-fg:#0b0e14;
    --chip:#141922; --chip-fg:#e6e8ec; --ring:#64748b;
    --shadow: none;
  }
}

/* --- Base --- */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:16px auto; max-width:980px;
  font:14px/1.55 var(--sans);
  color:var(--text); background:var(--bg);
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
}
.container{padding:0 12px}
h1{font-size:22px;margin:8px 0 12px}
h2{font-size:18px;margin:8px 0}
h3{font-size:16px;margin:6px 0}
p.muted{color:var(--muted)}
.mono{font-family:var(--mono)}
.row{display:flex; gap:var(--space); align-items:center; flex-wrap:wrap}

/* --- Card / section --- */
.card{
  background:var(--card); border:1px solid var(--border);
  border-radius:var(--radius-lg); padding:16px; margin:12px 0; box-shadow:var(--shadow);
}
.divider{height:1px;background:var(--divider); margin:10px 0}

/* --- Inputs --- */
.field{display:flex; flex-direction:column; gap:6px; min-width:240px}
.field label{font-weight:600}
input[type=text], input[type=number], select{
  padding:10px 12px; border:1px solid var(--border); background:var(--card);
  color:var(--text); border-radius:10px; outline:none;
}
input[type=text]:focus, input[type=number]:focus, select:focus{border-color:var(--ring); box-shadow:0 0 0 3px color-mix(in srgb, var(--ring) 25%, transparent)}

/* --- Buttons --- */
.btn{
  display:inline-flex; align-items:center; gap:8px;
  padding:9px 14px; border:1px solid var(--border); border-radius:10px;
  background:var(--card); color:var(--text); text-decoration:none; cursor:pointer;
}
.btn:hover{background:color-mix(in srgb, var(--card) 96%, var(--text) 4%)}
.btn.primary{background:var(--primary); color:var(--primary-fg); border-color:var(--primary)}
.btn.primary:hover{filter:brightness(0.98)}
.btn.tonal{background:#f6f7f9}
.btn.icon{padding:8px 10px}

/* --- Chips / pills --- */
.chip{display:inline-block; padding:4px 9px; border-radius:999px; background:var(--chip); color:var(--chip-fg); font-size:12px}

/* --- Segmented control (替代单选) --- */
.seg{display:inline-flex; border:1px solid var(--border); border-radius:12px; padding:2px; background:var(--card)}
.seg input{display:none}
.seg label{
  padding:6px 12px; border-radius:10px; cursor:pointer; user-select:none;
}
.seg input:checked + label{background:var(--chip); color:var(--chip-fg); font-weight:600}

/* --- Code / log --- */
pre{
  background:#0b1020; color:#d2e3ff; padding:12px; border-radius:12px;
  overflow:auto; font-size:12px; line-height:1.35; border:1px solid #0f172a22;
}

/* --- Details --- */
details{margin-top:6px}
summary{cursor:pointer; font-weight:600}

/* --- Lists for clusters --- */
.cluster{border:1px solid var(--border); border-radius:var(--radius-lg); padding:16px; margin-bottom:14px}
.pfam-tag{display:inline-block; margin:2px 6px 2px 0; padding:2px 6px; font-size:12px; border-radius:6px; background:#eef2ff; color:#3730a3}
.hidden{display:none !important}

/* --- Spinner --- */
.spinner{width:18px;height:18px;border:2px solid #cbd5e1;border-top-color:var(--accent); border-radius:50%; animation:spin .9s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
/* ========== 页面宽度开关（不破坏默认 980px） ========== */
/* 在模板里写：<body class="wide"> 或给容器加 .wide/.full 即可 */
body.wide { max-width: min(96vw, 1800px); }   /* 宽屏：基本占满 */
body.full { max-width: 100vw; margin: 0; }    /* 铺满：左右无边距 */

.container.wide { max-width: min(96vw, 1800px); margin: 0 auto; }
.container.full { max-width: 100vw; padding-inline: 16px; }

/* ========== 日志盒子（固定高度 + 内部滚动） ========== */
/* 你的 <pre id="log"> 上加 class="log-box" */
.log-box {
  max-height: 56vh;              /* 你想多高就改这儿 */
  overflow: auto;                /* 让内部滚动 */
  margin: 0;
}

/* ========== 进化树视图的通用样式（可按需覆盖） ========== */
.trees-grid{ display:grid; grid-template-columns:1fr 1fr; gap:18px; }
@media (max-width:1200px){ .trees-grid{ grid-template-columns:1fr; } }

.tree-card{ background:var(--card); border:1px solid var(--border);
  border-radius:var(--radius-lg); padding:12px; }

.tree-head{ display:flex; align-items:center; justify-content:space-between; margin:6px 6px 10px; }
.tree-actions{ display:flex; gap:8px; }

.tree-container{
  width:100%;
  height: 680px;                 /* 画布更高：这里调 */
  overflow:auto;
  background: color-mix(in srgb, var(--card) 92%, var(--text) 8%);
  border-radius:10px; padding:8px;
}

/* 进化树里的元素（和我给你的纯原生渲染器配套命名） */
.branch{ stroke:#aab3c2; stroke-width:1.2px; fill:none; }
.tree-label{
  font: 14px/1.25 var(--mono);   /* 字号更大 */
  fill:#cfd6e4;
  user-select: text;             /* 允许选中文本 */
  text-rendering: geometricPrecision;
}
.tree-label.selected{ fill:#ffd166; font-weight:600; } /* 点击高亮 */
.node-hit{ fill: transparent; cursor: pointer; }
.site-header {
  position: sticky;              /* 下拉时仍在顶部；不想吸顶就改为 static */
  top: 0;
  z-index: 1000;
  background: #fff;              /* 你的站点是白底主题 */
  border-bottom: 1px solid #eceff4;
}

.header-inner {
  display: flex;
  align-items: center;
  justify-content: space-between;  /* 左logo 右导航；没导航也没关系 */
  height: 64px;                    /* 头部高度 */
  gap: 16px;
}

/* 左上角 logo 尺寸与表现 */
.brand img {
  height: 34px;                    /* 控制可视高度（改这里即可快速放大/缩小） */
  width: auto;
  display: block;
  image-rendering: -webkit-optimize-contrast;
}

/* 让主体和页头留出呼吸空间（可按需调整） */
.container {
  padding-top: 18px;
}

/* 可选：深色模式兼容（如果以后加暗色主题） */
@media (prefers-color-scheme: dark) {
  .site-header {
    background: #0b0d12;
    border-bottom-color: rgba(255,255,255,.08);
  }
}